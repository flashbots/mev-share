# event-stream

Events on MEV-Share are distributed via an SSE endpoint. Searchers listen to this endpoint to receive a stream of new events, which contain data they can use in their bundles.

<!-- TOC -->
* [event-stream](#event-stream)
  * [Event Scheme](#event-scheme)
    * [`hash`](#hash)
    * [`logs`](#logs)
    * [`tx`](#tx)
    * [`mevGasPrice`](#mevGasPrice)
    * [`gasUsed`](#gasUsed)
    * [Stream Logic](#stream-logic)
<!-- TOC -->

## Event Scheme

```typescript
{
    hash: string,
    logs?: LogParams[],
    txs: Array<{
        to?: string,
        functionSelector?: string,
        callData?: string,
    }>,
    mevGasPrice: string,
    gasUsed: string
}
```

_NOTE: Optional fields are marked with a `?`._

### `hash`

Hex-string of the transaction or bundle hash.

### `logs`

Array of JSON-encoded event logs emitted by executing the transaction.

### `tx`

Transactions from the event. If the event itself is a transaction, txs will only have one entry. Bundle events may have more.

| Field | Type | Description |
| `to` | Hex-string | Transaction recipient address. |
| `functionSelector` | Hex-string | 4-byte function selector. |
| `callData` | Hex-string | Calldata of the transaction. |

### `mevGasPrice`

Hex-string of the MEV gas price paid by the transaction rounded up to the 3 most significant hex digits.

MEV gas price is calculated as coinbase delta after inserting the bundle divided by the gas used.

### `gasUsed`

Hex-string of the gas used by the transaction rounded up to the 3 most significant hex digits.

### Stream Logic

Users subscribe to the stream by making an HTTP GET request on the stream endpoint.

The endpoint should send an event with the message `:ping` every 15 seconds if no other messages were sent in the last 15 seconds.
